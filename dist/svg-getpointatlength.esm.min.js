const{abs:t,acos:e,asin:a,atan:s,atan2:n,ceil:l,cos:r,exp:h,floor:o,log:i,hypot:u,max:c,min:y,pow:p,random:x,round:g,sin:f,sqrt:d,tan:m,PI:v}=Math,M={},b=.5*Math.PI,A=.017453292519943295,w=57.29577951308232;function P(t={},e=3){return{x:+t.x.toFixed(e),y:+t.y.toFixed(e)}}function L(t,e,a=!1){let s=Math.atan2(e.y-t.y,e.x-t.x);return a&&s<0&&(s+=2*Math.PI),s}function D(t){let e=2*Math.PI;return(t%=e)<0?t+e:t}function k(t,e){return t.y===e.y?Math.abs(e.x-t.x):t.x===e.x?Math.abs(e.y-t.y):Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2)}function C(t,e,a,s=!1){let n={x:(e.x-t.x)*a+t.x,y:(e.y-t.y)*a+t.y};return s&&(n.angle=L(t,e),n.angle<0&&(n.angle+=2*Math.PI)),n}function T(t,e=.5,a=!1,s=!1){let n;if(t.length>2)n=((t,e,a=!1)=>{let n=4===t.length,l=t[0],r=t[1],h=n?t[2]:t[1],o=t[t.length-1],i={x:0,y:0};if(a||s){let t,a,u,c,y,p=l.x===r.x&&l.y===r.y,x=o.x===h.x&&o.y===h.y;0!==e||p?1!==e||x?(p&&(e+=1e-7),x&&(e-=1e-7),t=C(l,r,e),n?(a=C(r,h,e),u=C(h,o,e),c=C(t,a,e),y=C(a,u,e),i=C(c,y,e),i.angle=L(c,y),s&&(i.commands=[{type:"C",values:[t.x,t.y,c.x,c.y,i.x,i.y]},{type:"C",values:[y.x,y.y,u.x,u.y,o.x,o.y]}],i.segments=[{p0:l,cp1:t,cp2:c,p:i},{p0:i,cp1:y,cp2:u,p:o}])):(a=C(l,r,e),u=C(r,o,e),i=C(a,u,e),i.angle=L(a,u),s&&(i.commands=[{type:"Q",values:[a.x,a.y,i.x,i.y]},{type:"Q",values:[u.x,u.y,o.x,o.y]}],i.segments=[{p0:l,cp1:a,p:i},{p0:i,cp1:u,p:o}]))):(i.x=o.x,i.y=o.y,i.angle=L(h,o)):(i.x=l.x,i.y=l.y,i.angle=L(l,r))}else{let t=1-e;i=n?{x:t**3*l.x+3*t**2*e*r.x+3*t*e**2*h.x+e**3*o.x,y:t**3*l.y+3*t**2*e*r.y+3*t*e**2*h.y+e**3*o.y}:{x:t*t*l.x+2*t*e*r.x+e**2*o.x,y:t*t*l.y+2*t*e*r.y+e**2*o.y}}return i})(t,e,a);else{let l=t[0],r=t[1];n=C(l,r,e,a),s&&(n.commands=[{type:"L",values:[n.x,n.y]},{type:"L",values:[r.x,r.y]}],n.segments=[{p0:l,p:n},{p0:n,p:r}])}return a&&n.angle<0&&(n.angle+=2*Math.PI),n}function I(t,e,a,s,n,l,r,h,o,i=!0){const u=(t,e,a,s,n=!0)=>{let l=Math.atan2(s-e,a-t);return n&&l<0&&(l+=2*Math.PI),l};let c={cx:0,cy:0,rx:a=Math.abs(a),ry:s=Math.abs(s),startAngle:0,endAngle:0,deltaAngle:0,clockwise:r,xAxisRotation:n=a===s?0:n<0&&i?n+360:n,largeArc:l,sweep:r};if(0==a||0==s)throw Error("rx and ry can not be 0");let y,p,x=a===s?0:n*A,g=x?Math.sin(x):0,f=x?Math.cos(x):1,d=(t-h)/2,m=(e-o)/2,v=(t+h)/2,M=(e+o)/2,b=x?f*d+g*m:d,P=x?f*m-g*d:m,L=b*b/(a*a)+P*P/(s*s);if(L>1){let t=Math.sqrt(L);a*=t,s*=t,c.rx=a,c.ry=s}let D=a*s,k=a*P,C=s*b,T=k**2+C**2;if(!T)throw Error("start point can not be same as end point");let I=Math.sqrt(Math.abs((D*D-T)/T));l===r&&(I=-I);let q=I*k/s,E=-I*C/a;y=x?f*q-g*E+v:v+q,p=x?g*q+f*E+M:M+E,c.cy=p,c.cx=y;let N=u(y,p,t,e,i),_=u(y,p,h,o,i);r?_<N&&(_+=2*Math.PI):_>N&&(_-=2*Math.PI);let z=_-N;return c.startAngle=N,c.startAngle_deg=N*w,c.endAngle=_,c.endAngle_deg=_*w,c.deltaAngle=z,c.deltaAngle_deg=z*w,c}function q(t,e,a,s,n,l=0,r=!0,h=!1){if(n=h?n*A:n,l=h?l*A:l,l=a!==s&&l!==2*Math.PI?l:0,r&&a!==s){let t=E(n=l?n-l:n);n=Math.cos(n)<0?t+Math.PI:t}let o=t+a*Math.cos(n),i=e+s*Math.sin(n),u={x:o,y:i};return l&&(u.x=t+(o-t)*Math.cos(l)-(i-e)*Math.sin(l),u.y=e+(o-t)*Math.sin(l)+(i-e)*Math.cos(l)),u}function E(t,e,a){if(e===a||t%Math.PI*.5==0)return t;let s=Math.atan(Math.tan(t)*(e/a));return s=Math.cos(t)<0?s+Math.PI:s,s}function N(t,e,a){let s=-t*Math.sin(a),n=e*Math.cos(a);return Math.atan2(n,s)}function _(t=[]){let e=[],a=function(t=[]){let e=t.length,a=4===e,s=t[0],n=t[1],l=a?t[2]:n,r=a?t[3]:t[2],h=Math.min(s.y,r.y),o=Math.min(s.x,r.x),i=Math.max(s.x,r.x),u=Math.max(s.y,r.y),c=!1;(n.y<h||n.y>u||l.y<h||l.y>u||n.x<o||n.x>i||l.x<o||l.x>i)&&(c=!0);return c}(t);return a?(function(t){let e=4===t.length?function(t,e,a,s){let[n,l,r,h,o,i,u,c]=[t.x,t.y,e.x,e.y,a.x,a.y,s.x,s.y],y=Math.min(t.y,s.y),p=Math.min(t.x,s.x),x=Math.max(t.x,s.x),g=Math.max(t.y,s.y);if(e.y>=y&&e.y<=g&&a.y>=y&&a.y<=g&&e.x>=p&&e.x<=x&&a.x>=p&&a.x<=x)return[];for(var f,d,m,v,M,b,A,w,P=[],L=0;L<2;++L)if(0==L?(d=6*n-12*r+6*o,f=-3*n+9*r-9*o+3*u,m=3*r-3*n):(d=6*l-12*h+6*i,f=-3*l+9*h-9*i+3*c,m=3*h-3*l),Math.abs(f)<1e-12){if(Math.abs(d)<1e-12)continue;0<(v=-m/d)&&v<1&&P.push(v)}else(A=d*d-4*m*f)<0?Math.abs(A)<1e-12&&0<(v=-d/(2*f))&&v<1&&P.push(v):(0<(M=(-d+(w=Math.sqrt(A)))/(2*f))&&M<1&&P.push(M),0<(b=(-d-w)/(2*f))&&b<1&&P.push(b));var D=P.length;for(;D--;)v=P[D];return P}(t[0],t[1],t[2],t[3]):function(t,e,a){let s,n,l,r=Math.min(t.y,a.y),h=Math.min(t.x,a.x),o=Math.max(t.x,a.x),i=Math.max(t.y,a.y);if(e.y>=r&&e.y<=i&&e.x>=h&&e.x<=o)return[];let[u,c,y,p,x,g]=[t.x,t.y,e.x,e.y,a.x,a.y],f=[];for(var d=0;d<2;++d)s=0==d?u-2*y+x:c-2*p+g,n=0==d?-2*u+2*y:-2*c+2*p,Math.abs(s)>1e-12&&(l=-n/(2*s),l>0&&l<1&&f.push(l));return f}(t[0],t[1],t[2]);return e}(t).forEach(a=>{let s=T(t,a);e.push(s)}),e):e}function z(t,e,a={}){let{rx:s,ry:n,cx:l,cy:r,xAxisRotation:h,startAngle:o,endAngle:i,deltaAngle:u,sweep:c,deltaAngle_param:y}=a,p=[];if(s===n){let a=0===Math.abs(o%b),n=!!a&&0===Math.abs(i%b);if(a&&n){if(!!(0===Math.abs(u%b))&&0===Math.abs(u%v)){let a=t.x===e.x,n=c?s:-s;if(t.y===e.y){n=t.x<e.x?-n:n,p=[{x:l,y:r+n}]}if(a){n=t.y<e.y?n:-n,p=[{x:l+n,y:r}]}return p}}}u=i-o;const x=(t,e,a,s,n,l)=>{let r=l?Math.cos(l):1,h=l?Math.sin(l):0,o=s*Math.cos(t),i=n*Math.sin(t);return{x:e+r*o-h*i,y:a+h*o+r*i}};let g,f,d,m,M,A=Math.tan(h);M=Math.atan2(-n*A,s);let w=M,P=M+Math.PI,L=Math.atan2(n,s*A),D=L+Math.PI,k=[t.x,e.x],C=[t.y,e.y],T=Math.min(...k),I=Math.max(...k),q=Math.min(...C),E=Math.max(...C),N=x(i-.999*u,l,r,s,n,h),_=x(i-.001*u,l,r,s,n,h);return(N.x>I||_.x>I)&&(g=x(w,l,r,s,n,h),p.push(g)),(N.x<T||_.x<T)&&(f=x(P,l,r,s,n,h),p.push(f)),(N.y<q||_.y<q)&&(m=x(D,l,r,s,n,h),p.push(m)),(N.y>E||_.y>E)&&(d=x(L,l,r,s,n,h),p.push(d)),p}function j(t,e=.001){let a=0;for(let e=0,s=t.length;s&&e<s;e++){let s=t[e].x,n=t[e===t.length-1?0:e+1];a+=s*n.y*.5-n.x*t[e].y*.5}return Math.abs(a)<e}function S(t,e=-1,a=1){let s,n,l,r,h,o,i,u,c=[];l=.5*(a+e),r=.5*(a-e);for(let e=(t+1>>1)-1;e>=0;e--){n=Math.cos(Math.PI*(e+.75)/(t+.5));do{u=1,i=0;for(let e=0;e<t;e++)o=i,i=u,u=((2*e+1)*n*i-e*o)/(e+1);h=t*(n*u-i)/(n*n-1),s=n,n=s-u/h}while(Math.abs(n-s)>1e-14);let a=2*r/((1-n*n)*h*h),y=l+r*n;c.push([a,-y],[a,y])}return c}function $(t,e,a,s,n=[]){let l=.5*(s-a),r=.5*(s+a),h=0;for(let a=0;a<n.length;a++){let[s,o]=n[a],i=r+l*o;h+=s*Math.sqrt(Math.pow(t*Math.sin(i),2)+Math.pow(e*Math.cos(i),2))}return Math.abs(l*h)}function F(t,e,a,s,n){return t*(t*(-3*e+9*a-9*s+3*n)+6*e-12*a+6*s)-3*e+3*a}function O(t,e=1,a=0){let s;return s=4===t.length?((t,e,a,s,n=0,l)=>{if(0===n)return 0;let r=(n=n>1?1:n<0?0:n)/2,h=`wa${l}`;M[h]||(M[h]=S(l));const o=M[h];let i=0,u=t.x,c=t.y,y=e.x,p=e.y,x=a.x,g=a.y,f=s.x,d=s.y;for(let t=0,e=o.length;t<e;t++){let[e,a]=[o[t][0],o[t][1]],s=-r*a+r,n=F(s,u,y,x,f)**2+F(s,c,p,g,d)**2;i+=e*Math.sqrt(n)}return r*i})(t[0],t[1],t[2],t[3],e,a):3===t.length?((t,e,a,s,n=!1)=>{if(0===s)return 0;if(n){let s=k(t,e)+k(e,a),n=k(t,a);if(s===n)return n}let l,r,h,o,i,u,c,y,p;y=2*e.x,p=2*e.y,o=t.x-y+a.x,c=t.y-p+a.y,i=y-2*t.x,u=p-2*t.y,l=4*(o*o+c*c),r=4*(o*i+c*u),h=i*i+u*u;const x=r/(2*l),g=s+x,f=h/l-x**2;return Math.sqrt(l)/2*(g*Math.sqrt(g**2+f)-x*Math.sqrt(x**2+f)+f*Math.log((g+Math.sqrt(g**2+f))/(x+Math.sqrt(x**2+f))))})(t[0],t[1],t[2],e):k(t[0],t[1]),s}function R(t){let e=[];try{t.map((t,e)=>"m"===t.type.toLowerCase()?e:-1).filter(t=>-1!==t)}catch{console.log("catch",t)}let a=t.map((t,e)=>"m"===t.type.toLowerCase()?e:-1).filter(t=>-1!==t);if(1===a.length)return[t];a.forEach((s,n)=>{e.push(t.slice(s,a[n+1]))});let s=0;return e.forEach((t,a)=>{t.forEach((t,n)=>{e[a][n].index=s,s++})}),e}function Q(t,e=24){let a=function(t,e=48){if(!Array.isArray(t)||t.length<=e)return t;let a=t.length,s=a/e,n=[t[0]];for(let a=0;a<e;a++)n.push(t[Math.floor(a*s)]);let l=n.length;return n[l-1]!==t[a-1]&&(n[l-1]=t[a-1]),n}(t,e),{width:s,height:n}=Z(a),l=((s+n)/2)**2;var r,h;return(r=t[0],((h=t[t.length-1]).x-r.x)**2+(h.y-r.y)**2)<l}function Z(t,e=-1){let a=t.map(t=>t.x),s=t.map(t=>t.y),n=Math.min(...a),l=Math.max(...a),r=Math.min(...s),h=Math.max(...s),o={x:n,left:n,right:l,y:r,top:r,bottom:h,width:l-n,height:h-r};if(e>-1)for(let t in o)o[t]=+o[t].toFixed(e);return o}function V(t){let e=[];return t.forEach(t=>{let a=function(t){let e=function(t){let e=[];for(let a=0;a<t.length;a++){let s=t[a],n=a>0?t[a-1]:t[a],{type:l,values:r}=s,h={x:n.values[n.values.length-2],y:n.values[n.values.length-1]},o=r.length?{x:r[r.length-2],y:r[r.length-1]}:"",i=r.length?{x:r[0],y:r[1]}:"";switch(l){case"A":let[t,a,s,n,l,u,c]=r;if(!(t!==a)){let t=o.x-h.x,a=o.y-h.y,s=h.x+t/2,n=h.y+a/2,r=0===a,i=0===t;if(r&&!i||!r&&i){let h=r?.5*t:.5*a;h=l?h:-h;let o=r?{x:s,y:n-h}:{x:s-h,y:n};e.push(o)}}break;case"C":let y={x:r[2],y:r[3]};e.push(i,y);break;case"Q":e.push(i)}"z"!==l.toLowerCase()&&e.push(o)}return e}(t),a=Z(e);return a}(t);e.push(a)}),e}function B(t,e){let[a,s,n,l,r,h]=[t.x,t.y,t.width,t.height,t.x+t.width,t.y+t.height],[o,i,u,c,y,p]=[e.x,e.y,e.width,e.height,e.x+e.width,e.y+e.height],x=!1;return n*l!=u*c&&n*l>u*c&&a<o&&r>y&&s<i&&h>p&&(x=!0),x}function U(t,e,a,s,n=0){let l=t!==e;l||(n=0),l&&(a=E(a-n,t,e),s=E(s-n,t,e));let r=Math.PI*t*e,h=s-a,o=Math.abs(h)<.5*Math.PI,i=2*Math.PI,u=(h+i)%i;if(!l){return r*(Math.abs(h)/i)}return h=!n||n<0&&o?Math.abs(h):h,u=(h+i)%i,r*(u/i)}function G(t){let e,[a,s,n,l]=[t[0],t[1],t[2],t[t.length-1]];return t.length<3?0:(3===t.length&&(s={x:1*t[0].x/3+2*t[1].x/3,y:1*t[0].y/3+2*t[1].y/3},n={x:1*t[2].x/3+2*t[1].x/3,y:1*t[2].y/3+2*t[1].y/3}),e=3*(a.x*(-2*s.y-n.y+3*l.y)+s.x*(2*a.y-n.y-l.y)+n.x*(a.y+s.y-2*l.y)+l.x*(-3*a.y+s.y+2*n.y))/20,-e)}function J(t,e=.001){let a=0;for(let e=0,s=t.length;s&&e<s;e++){a+=t[e].x*t[e===t.length-1?0:e+1].y*.5-t[e===t.length-1?0:e+1].x*t[e].y*.5}return a}function H(t,e){Array.isArray(t)&&(t={x:t[0],y:t[1]});let a={x:t.x+2/3*(e[0]-t.x),y:t.y+2/3*(e[1]-t.y)},s={x:e[2]+2/3*(e[0]-e[2]),y:e[3]+2/3*(e[1]-e[3])};return{type:"C",values:[a.x,a.y,s.x,s.y,e[2],e[3]]}}function W(t,e=!1,a=-1){a>=0&&(t[0].values=t[0].values.map(t=>+t.toFixed(a)));let s=t[0].values,n=s[0],l=s[1],r=n,h=l;for(let s=1,o=t.length;s<o;s++){let o=t[s],{type:i,values:u}=o,c=e?i.toLowerCase():i.toUpperCase();if(i!==c)switch(i=c,o.type=i,i){case"a":case"A":u[5]=e?u[5]-n:u[5]+n,u[6]=e?u[6]-l:u[6]+l;break;case"v":case"V":u[0]=e?u[0]-l:u[0]+l;break;case"h":case"H":u[0]=e?u[0]-n:u[0]+n;break;case"m":case"M":e?(u[0]-=n,u[1]-=l):(u[0]+=n,u[1]+=l),r=e?u[0]+n:u[0],h=e?u[1]+l:u[1];break;default:if(u.length)for(let t=0;t<u.length;t++)u[t]=e?u[t]-(t%2?l:n):u[t]+(t%2?l:n)}let y=u.length;switch(i){case"z":case"Z":n=r,l=h;break;case"h":case"H":n=e?n+u[0]:u[0];break;case"v":case"V":l=e?l+u[0]:u[0];break;case"m":case"M":r=u[y-2]+(e?n:0),h=u[y-1]+(e?l:0);default:n=u[y-2]+(e?n:0),l=u[y-1]+(e?l:0)}a>=0&&(o.values=o.values.map(t=>+t.toFixed(a)))}return t}function Y(t,e=-1,a=!0){let s=!1;if(a){let e=t.map(t=>t.type).join(""),a=/[hstv]/gi.test(e);if(s=/[astvqmhlc]/g.test(e),!a)return t}t=a&&s?function(t,e=-1){return W(t,!1,e)}(t,e):t;let n=[],l={type:"M",values:t[0].values};n.push(l);for(let a=1,s=t.length;a<s;a++){let s,r,h,o,i,u,c,y,p=t[a],{type:x,values:g}=p,f=g.length,d=l.values,m=d.length,[v,M]=[g[f-2],g[f-1]],[b,A]=[d[m-2],d[m-1]];switch(x){case"H":l={type:"L",values:[g[0],A]};break;case"V":l={type:"L",values:[b,g[0]]};break;case"T":[s,r]=[d[0],d[1]],[b,A]=[d[m-2],d[m-1]],h=b+(b-s),o=A+(A-r),l={type:"Q",values:[h,o,v,M]};break;case"S":[s,r]=[d[0],d[1]],[b,A]=[d[m-2],d[m-1]],[c,y]=m>2&&"A"!==l.type?[d[2],d[3]]:[b,A],h=2*b-c,o=2*A-y,i=g[0],u=g[1],l={type:"C",values:[h,o,i,u,v,M]};break;default:l={type:x,values:g}}e>-1&&(l.values=l.values.map(t=>+t.toFixed(e))),n.push(l)}return n}function K(t,e,a=1){const s=2*Math.PI;let[n,l,r,h,o,i,u]=e;if(0===n||0===l)return[];let c=r?r*s/360:0,y=c?Math.sin(c):0,p=c?Math.cos(c):1,x=p*(t.x-i)/2+y*(t.y-u)/2,g=-y*(t.x-i)/2+p*(t.y-u)/2;if(0===x&&0===g)return[];n=Math.abs(n),l=Math.abs(l);let f=x*x/(n*n)+g*g/(l*l);if(f>1){let t=Math.sqrt(f);n*=t,l*=t}let d=n*n,m=n===l?d:l*l,v=x*x,M=g*g,b=d*m-d*M-m*v;b<=0?b=0:(b/=d*M+m*v,b=Math.sqrt(b)*(h===o?-1:1));let A=b?b*n/l*g:0,w=b?b*-l/n*x:0,P=p*A-y*w+(t.x+i)/2,L=y*A+p*w+(t.y+u)/2,D=(x-A)/n,k=(g-w)/l,C=(-x-A)/n,T=(-g-w)/l;const I=(t,e,a,s)=>{let n=+(t*a+e*s).toFixed(9);return 1===n||-1===n?1===n?0:Math.PI:(n=n>1?1:n<-1?-1:n,(t*s-e*a<0?-1:1)*Math.acos(n))};let q=I(1,0,D,k),E=I(D,k,C,T);0===o&&E>0?E-=2*Math.PI:1===o&&E<0&&(E+=2*Math.PI);let N=(+(Math.abs(E)/(s/4)).toFixed(0)||1)*a;E/=N;let _=[];const z=1.5707963267948966,j=.551785;let S=E===z?j:E===-z?-j:4/3*Math.tan(E/4),$=E?Math.cos(E):1,F=E?Math.sin(E):0;const O=(t,e,a,s,n)=>{let l=t!=e?Math.cos(t):s,r=t!=e?Math.sin(t):n,h=Math.cos(t+e),o=Math.sin(t+e);return[{x:l-r*a,y:r+l*a},{x:h+o*a,y:o-h*a},{x:h,y:o}]};for(let t=0;t<N;t++){let t={type:"C",values:[]};O(q,E,S,$,F).forEach(e=>{let a=e.x*n,s=e.y*l;t.values.push(p*a-y*s+P,y*a+p*s+L)}),_.push(t),q+=E}return _}function X(t=[],{toAbsolute:e=!0,toLonghands:a=!0,quadraticToCubic:s=!1,arcToCubic:n=!1,arcAccuracy:l=4}={},{hasRelatives:r=!0,hasShorthands:h=!0,hasQuadratics:o=!0,hasArcs:i=!0,testTypes:u=!1}={}){if(u){let e=Array.from(new Set(t.map(t=>t.type))).join("");r=/[lcqamts]/gi.test(e),o=/[qt]/gi.test(e),i=/[a]/gi.test(e),h=/[vhst]/gi.test(e),isPoly=/[mlz]/gi.test(e)}return(o&&s||i&&n)&&(a=!0,e=!0),r&&e&&(t=W(t,!1)),h&&a&&(t=Y(t,-1,!1)),i&&n&&(t=function(t,{arcAccuracy:e=1}={}){let a=[t[0]];for(let s=1,n=t.length;s<n;s++){let n=t[s],l=t[s-1].values,r=l.length,h={x:l[r-2],y:l[r-1]};"A"===n.type?K(h,n.values,e).forEach(t=>{a.push(t)}):a.push(n)}return a}(t,l)),o&&s&&(t=function(t){let e=[t[0]];for(let a=1,s=t.length;a<s;a++){let s=t[a],n=t[a-1].values,l=n.length,r={x:n[l-2],y:n[l-1]};"Q"===s.type?e.push(H(r,s.values)):e.push(s)}return e}(t)),t}function tt(t,{toAbsolute:e=!0,toLonghands:a=!0,quadraticToCubic:s=!1,arcToCubic:n=!1,arcAccuracy:l=4}={}){let r=st(t),{hasRelatives:h,hasShorthands:o,hasQuadratics:i,hasArcs:u}=r,c=r.pathData;return c=X(c,{toAbsolute:e,toLonghands:a,quadraticToCubic:s,arcToCubic:n,arcAccuracy:l},{hasRelatives:h,hasShorthands:o,hasQuadratics:i,hasArcs:u}),c}const et=new Set([77,109,65,97,67,99,76,108,81,113,83,115,84,116,72,104,86,118,90,122]),at=new Uint8Array(128);function st(t,e=!0){t=t.trim();const a=new Set([5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279]),s=t=>32===t||44===t||10===t||13===t||8232===t||8233===t||9===t||11===t||12===t||160===t||t>=5760&&a.has(t);let n,l=0,r=t.length,h="",o=[],i=-1,u="",c=!1,y=0,p=0,x=0,g=!1,f=new Set([]),d=[];const m=()=>{g&&("M"===h?h="L":"m"===h&&(h="l"),o.push({type:h,values:[]}),i++,p=0,g=!1)},v=(t=!1)=>{(t?y>0:""!==u)&&(e&&-1===i&&(n="Pathdata must start with M command",d.push(n),h="M",o.push({type:h,values:[]}),x=2,p=0,i++),"A"===h||"a"===h?(u=M(),o[i].values.push(...u)):(e&&u[1]&&"."!==u[1]&&"0"===u[0]&&(n=`${i}. command: Leading zeros not valid: ${u}`,d.push(n)),o[i].values.push(+u)),p++,u="",y=0,g=p>=x)},M=()=>{let t=u.length,e=!1;return 3===p&&2===t||4===p&&t>1?(u=[+u[0],+u[1]],e=!0,p++):3===p&&t>=3&&(u=[+u[0],+u[1],+u.substring(2)],e=!0,p+=2),e?u:[+u]},b=()=>{if(i>0){let t=o[i].values.length;if(t&&t<x||t&&t>x||("z"===h||"Z"===h)&&t>0){n=`${i}. command of type "${h}": ${x-t} values too few - ${x} expected`,d[d.length-1]!==n&&d.push(n)}}};let A=!1,w=!1,P=!1;for(;l<r;){let a=t.charCodeAt(l),r=a>47&&a<58;if(r||(A=101===a||69===a,w=45===a||43===a,P=46===a),r||w||P||A){if(c||45!==a&&46!==a)m();else{let t=46===a;v(t),m(),t&&y++}u+=t[l],c=A,l++}else if((a<48||a>5759)&&s(a))v(),l++;else{if(a>64){if(!et.has(a)){n=`${i}. command "${t[l]}" is not a valid type`,d.push(n),l++;continue}""!==u&&(o[i].values.push(+u),p++,u=""),e&&b(),h=t[l],x=at[a];let s="M"===h||"m"===h,r=i>0&&("z"===o[i].type||"Z"===o[i].type);f.add(h),r&&!s&&(o.push({type:"m",values:[0,0]}),i++),o.push({type:h,values:[]}),i++,y=0,p=0,g=!1,l++;continue}r||(n=`${i}. ${t[l]} is not a valid separarator or token`,d.push(n),u=""),l++}}if(v(),e&&b(),e&&d.length){if(n="Invalid path data:\n"+d.join("\n"),"log"!==e)throw new Error(n);console.log(n)}o[0].type="M";let L=Array.from(f).join(""),D=/[lcqamts]/g.test(L),k=/[vhst]/gi.test(L),C=/[a]/gi.test(L),T=/[qt]/gi.test(L);return{pathData:o,hasRelatives:D,hasShorthands:k,hasQuadratics:T,hasArcs:C}}function nt(t){return t.map(t=>`${t.type} ${t.values.join(" ")}`).join(" ")}function lt(t,e=!1){let a,s,n,l,r,h,o,i,u,c,y,p,x,g,f,d,m=[],v=t.nodeName;((t,e=9)=>{const a="svg"!==t.nodeName?t.closest("svg"):t,s=t=>{if(null===t)return 0;let a=t.match(/([a-z]+)/gi);a=a?a[0]:"";let s,n=parseFloat(t);if(!a)return n;switch(a){case"in":s=96;break;case"pt":s=1/72*96;break;case"cm":s=1/2.54*96;break;case"mm":s=1/2.54*96/10;break;case"em":case"rem":s=16;break;default:s=1}return+(n*s).toFixed(e)};let n=a.getAttribute("width");n=n?s(n):300;let l=a.getAttribute("height");l=n?s(l):150;let r=a.getAttribute("viewBox");r=r?r.replace(/,/g," ").split(" ").filter(Boolean).map(t=>+t):[];let h=r.length?r[2]:n,o=r.length?r[3]:l,i=h/100,u=o/100,c=Math.sqrt((Math.pow(i,2)+Math.pow(u,2))/2),y=["x","width","x1","x2","rx","cx","r"],p=["y","height","y1","y2","ry","cy"];t.getAttributeNames().forEach(e=>{let a=t.getAttribute(e),n=a;if(y.includes(e)||p.includes(e)){let l=y.includes(e)?i:u;l="r"===e&&h!=o?c:l;let r=a.match(/([a-z|%]+)/gi);r=r?r[0]:"",n=a.includes("%")?parseFloat(a)*l:s(a),t.setAttribute(e,+n)}})})(t);const M=e=>(a={},e.forEach(e=>{a[e]=+t.getAttribute(e)}),a);switch(v){case"path":n=t.getAttribute("d"),m=tt(n);break;case"rect":s=["x","y","width","height","rx","ry"],({x:l,y:r,width:h,height:o,rx:u,ry:c}=M(s)),u||c?(u>h/2&&(u=h/2),c>o/2&&(c=o/2),m=[{type:"M",values:[l+u,r]},{type:"L",values:[l+h-u,r]},{type:"A",values:[u,c,0,0,1,l+h,r+c]},{type:"L",values:[l+h,r+o-c]},{type:"A",values:[u,c,0,0,1,l+h-u,r+o]},{type:"L",values:[l+u,r+o]},{type:"A",values:[u,c,0,0,1,l,r+o-c]},{type:"L",values:[l,r+c]},{type:"A",values:[u,c,0,0,1,l+u,r]},{type:"Z",values:[]}]):m=[{type:"M",values:[l,r]},{type:"L",values:[l+h,r]},{type:"L",values:[l+h,r+o]},{type:"L",values:[l,r+o]},{type:"Z",values:[]}];break;case"circle":case"ellipse":s=["cx","cy","rx","ry","r"],({cx:y,cy:p,r:i,rx:u,ry:c}=M(s)),"circle"===v?(u=i,c=i):(u=u||i,c=c||i),m=[{type:"M",values:[y+u,p]},{type:"A",values:[u,c,0,1,1,y-u,p]},{type:"A",values:[u,c,0,1,1,y+u,p]}];break;case"line":s=["x1","y1","x2","y2"],({x1:x,y1:f,x2:g,y2:d}=M(s)),m=[{type:"M",values:[x,f]},{type:"L",values:[g,d]}];break;case"polygon":case"polyline":let e=t.getAttribute("points").replaceAll(","," ").split(" ").filter(Boolean);for(let t=0;t<e.length;t+=2)m.push({type:0===t?"M":"L",values:[+e[t],+e[t+1]]});"polygon"===v&&m.push({type:"Z",values:[]})}return e?nt(m):m}function rt(t,{arcToCubic:e=!1,arcAccuracy:a=4,quadraticToCubic:s=!1}={},n=!1){let l={isValid:!1,dummyPath:"M40 10h20v50h-20zm0 60h20v20h-20z"};if(!t)return;let r=Array.isArray(t)&&t.length?"array":t?typeof t:null;if(t&&"string"===r){let e=t.includes("<svg")&&t.includes("</svg"),a=t.includes("totalLength")&&t.includes("segments"),s=!a&&(t.includes("{")&&t.includes('"x"')&&t.includes('"y"'));if(e&&(t=t.replace(/<\?xml[\s\S]*?\?>/gi,"").replace(/<!DOCTYPE[\s\S]*?>/gi,"").replace(/<!--[\s\S]*?-->/g,"").trim()),!e&&(a||s))try{let e=JSON.parse(t);a?t=e.pathData:s&&(t=e),r="array"}catch{throw Error("No valid JSON")}}let h=[],o={arcToCubic:e,arcAccuracy:a,quadraticToCubic:s},i=!0;if("object"===r&&t.nodeName){let e=["path","polygon","polyline","line","circle","ellipse","rect"];if("svg"===t.nodeName){t.querySelectorAll(`${e.join(", ")}`).forEach(t=>{h.push(...lt(t))})}else t.closest("svg")&&e.includes(t.nodeName)&&(r="element",h=lt(t));h.length&&(t=h,r="array")}if(!r)return null;const u=t=>{let e=[{type:"M",values:[t[0],t[1]]}];for(let a=3,s=t.length;a<s;a+=2){let[s,n]=[t[a-1],t[a]];e.push({type:"L",values:[s,n]})}return e};if("array"===r){if(!!t[0].type){"object"==typeof t[0]&&"object"!=typeof t[0].constructor&&(t=(t=>{let e=[],a="M";return t.forEach(t=>{let{type:s,values:n}=t;"z"===a.toLocaleLowerCase()&&"m"!==s.toLocaleLowerCase()&&e.push({type:"m",values:[0,0]}),e.push({type:s,values:n}),a=s}),e})(t)),h=t}else{if(Array.isArray(t[0])){let e=!("object"!=typeof t[0][0]||!t[0][0].x||isNaN(t[0][0].x)),a=2===t[0][0].length&&!isNaN(t[0][0][0]);if(e||a)for(let a=0,s=t.length;a<s;a++){let s=t[a];for(let t=0,a=s.length;t<a;t++){let a=s[t],n=0===t?"M":"L",l=e?[a.x,a.y]:[a[0],a[1]];h.push({type:n,values:l})}}else{if(2===t[0].length&&!isNaN(t[0][0])){h=[{type:"M",values:[t[0][0],t[0][1]]}];for(let e=1,a=t.length;e<a;e++){let a=t[e];h.push({type:"L",values:[a[0],a[1]]})}}}}else{let e=!isNaN(t[0]);if(t[0].hasOwnProperty("x")&&t[0].hasOwnProperty("y")){h=[{type:"M",values:[t[0].x,t[0].y]}];for(let e=1,a=t.length;e<a;e++){let a=t[e];h.push({type:"L",values:[a.x,a.y]})}Q(t)&&h.push({type:"Z",values:[]})}else e&&(h=u(t))}}}else{if((t=t.trim()).startsWith("<svg")){let e=["path","polygon","polyline","line","rect","circle","ellipse"],a=(new DOMParser).parseFromString(t,"text/html").querySelector("svg").querySelectorAll(`${e.join(", ")}`);for(let t=0,e=a.length;t<e;t++){let e=a[t];if(e.closest("defs")||e.closest("symbol")||e.closest("pattern")||e.closest("mask")||e.closest("clipPath"))continue;let s=e.closest("g");if(s){if("none"===s.getAttribute("display")||"none"===s.style.display)continue}let n=lt(e);h.push(...n)}}else{let e=t.startsWith("M")||t.startsWith("m"),a=/[lcqamtsvhs]/gi.test(t);if(e)h=tt(t,o),i=!1;else{if(!isNaN(t.trim()[0])&&!a)try{t=t.split(/,| /).map(Number),h=u(t);let e=(t=>{let e=[{x:t[0],y:t[1]}];for(let a=3,s=t.length;a<s;a+=2){let[s,n]=[t[a-1],t[a]];e.push({x:s,y:n})}return e})(t);Q(e)&&h.push({type:"Z",values:[]}),i=!1}catch{console.warn("not a valid poly string")}}}}return h.length?n?(l.isValid=!0,l):(i&&(h=X(h,o)),h):(console.warn("No valid input  - could not create lookup"),n?(h=tt(l.dummyPath),l):[])}function ht(t={}){Object.assign(this,t)}function ot(t,e="medium",a=!1,s=!0,{arcToCubic:n=!1,arcAccuracy:l=2,quadraticToCubic:r=!1}={}){return it(t,e,a,s,{arcToCubic:n,arcAccuracy:l,quadraticToCubic:r})}function it(t,e="medium",a=!1,s=!0,{arcToCubic:n=!1,arcAccuracy:l=2,quadraticToCubic:r=!1}={}){if(t&&"string"==typeof t&&t.includes("totalLength")&&t.includes("segments"))try{return new ht(JSON.parse(t))}catch{throw Error("No valid JSON")}if(!t)throw Error("No path data defined");n&&"high"===e&&(l=4);let h=rt(t,{arcToCubic:n,arcAccuracy:l,quadraticToCubic:r});if(!h.length)throw Error("No valid path data to parse");let o=ct(h,e,a,s);return o.pathData=h,a?o.pathLength:new ht(o)}function ut(t,e="medium",a=!0){return function(t,e="medium",a=!0){return ct(t,e,a)}(rt(t),e,a)}function ct(t,e="medium",a=!1,s=!0){a&&(s=!1);let n="high"===e,l="medium"===e?24:12,r=[12,24,36,48,60,64,72],h=`wa${l}`;M[h]||(M[h]=S(l));let o=M[h],i="low"===e?10:12,u="low"===e?15:"medium"===e?23:35,c=u,y=t.length,p=0,x=t[0],g={totalLength:0,segments:[]},f={x:x.values[0],y:x.values[0]},d=0,m=0;for(let e=1;e<y;e++){let h=t[e-1].values,y=h.length;f={x:h[y-2],y:h[y-1]};let w,P,D,k=t[e],{type:C,values:q}=k,N=q.length,_={x:q[N-2],y:q[N-1]},z=0,F=1,R={type:C,index:e,segIndex:m,com:{type:C,values:q,p0:f},lengths:[],points:[],angles:[],total:0};switch(C){case"M":x=t[e],z=0;break;case"Z":case"z":case"L":"z"===C.toLowerCase()&&(_={x:x.values[0],y:x.values[1]},R.type="L"),z=O([f,_]),R.points.push(f,_),s&&(D=L(f,_),R.angles.push(D));break;case"A":_={x:k.values[5],y:k.values[6]};let[h,y]=[k.values[3],k.values[4]],g=I(f.x,f.y,k.values[0],k.values[1],k.values[2],h,y,_.x,_.y,!1),{cx:m,cy:N,rx:Q,ry:Z,startAngle:V,endAngle:B,deltaAngle:U,xAxisRotation:G}=g;d=G?y?b:-b:y?0:-v,d=G<0?-1*d:d,g.tangentAdjust=d,g.isEllipse=Q!==Z,R.arcData=g;let J=U;if(Q!==Z){G*=A;let t=`wa${l}`;M[t]||(M[t]=S(l)),M.wa48||(M.wa48=S(48)),o=M[t];let e=M.wa48;V=E(V-G,Q,Z),B=E(B-G,Q,Z),J=B-V,U=U>0&&J<0||U<0&&J>0?U:J,y&&V>B&&(B+=2*v),!y&&V<B&&(B-=2*v);let a=0;R.lengths.push(p),R.angles.push(V);for(let t=1;t<u;t++){let e=V+U/u*t;a=$(Q,Z,V,e,o),z+=a,R.lengths.push(a+p),R.angles.push(e)}R.angles.push(B),z=$(Q,Z,V,B,e),R.arcData_param={cx:m,cy:N,rx:Q,ry:Z,deltaAngle:U,deltaAngle_param:J,startAngle:V,endAngle:B,largeArc:h,sweep:y,xAxisRotation:G,tangentAdjust:d,isEllipse:Q!==Z}}else if(z=2*v*Q*(1/360*Math.abs(180*U/v)),s){let t=U<0?V-v:V,e=U<0?B-v:B;R.angles=[t+b,e+b]}R.points=[f,_];break;case"C":case"Q":w={x:q[0],y:q[1]},P="C"===C?{x:q[2],y:q[3]}:w;let H="C"===C?[f,w,P,_]:[f,w,_];c="Q"===C?i:u,R.lengths.push(p);let W=j(H),Y=!1;if(W){let t=Math.min(f.y,_.y),e=Math.min(f.x,_.x),a=Math.max(f.x,_.x),s=Math.max(f.y,_.y);(w.y<t||w.y>s||P.y<t||P.y>s||w.x<e||w.x>a||P.x<e&&P.x>a)&&(Y=!0,W=!1)}if(Y&&"Q"===C){let t={x:f.x+2/3*(w.x-f.x),y:f.y+2/3*(w.y-f.y)};P={x:_.x+2/3*(w.x-_.x),y:_.y+2/3*(w.y-_.y)},w=t,C="C",R.type="C",H=[f,w,P,_]}if(W){H=[f,_],z=O(H),R.type="L",R.points.push(f,_),s&&(D=L(f,_),R.angles.push(D));break}if(z=O(H,1,n?r[0]:l),"C"===C&&n){let t,e=!1,a=.001,s=0;for(let n=1;n<r.length&&!e;n++){t=O(H,1,r[n]),s=Math.abs(t-z),s<a||n===r.length-1?(l=r[n-1],e=!0):z=t}}if(!a&&!W){if(s){let t=T(H,0,!0).angle;R.angles.push(t,T(H,1,!0).angle)}for(let t=1;t<c;t++)F=1/c*t,R.lengths.push(O(H,F,l)+p);R.points=H}break;default:z=0}a||(R.lengths.push(z+p),R.total=z),p+=z,"M"!==C&&(g.segments.push(R),m++),g.totalLength=p,"Z"===C&&(R.com.values=[_.x,_.y])}return g}function yt(t,e=0,a=!0,s=!0,n=-1){let{segments:l,pathData:r,totalLength:h}=t;l[0].angles.length||(s=!1);let o=s,i=l[0],u=l[l.length-1],c=i.points[0],y=i.angles[0];y=y<0?y+2*Math.PI:y;let p=0,x=!1,g={x:c.x,y:c.y};n>-1&&(g=P(g));let f,d,m,v,M=0;if(a&&(g.angle=y,"A"===i.type)){let{arcData:t}=i;({rx:d,ry:m,xAxisRotation:v,tangentAdjust:M}=t.isEllipse?i.arcData_param:t),d!==m&&(f=D(N(d,m,y)-v+M),g.angle=f)}if(s&&(g.index=l[0].index,g.segIndex=0,g.com=l[0].com),0===e)return g;if(e>=h){let t=u.points[u.points.length-1],e=u.angles[u.angles.length-1];if(g.x=t.x,g.y=t.y,a&&(g.angle=e,"A"===u.type)){let{arcData:t}=u;({rx:d,ry:m,xAxisRotation:v,tangentAdjust:M}=t.isEllipse?u.arcData_param:t),d!==m&&(f=D(N(d,m,e)-v+M),g.angle=f)}return s&&(g.index=r.length-1,g.segIndex=l.length-1,g.com=l[l.length-1].com),n>-1&&(g=P(g)),g}for(let t=0;t<l.length&&!x;t++){let n=l[t],{type:r,lengths:h,points:i,total:u,angles:c,com:y}=n,d=h[h.length-1],m=1/(h.length-1);if(d>=e){x=!0;let t,l=!1;switch(r){case"L":t=d-e,p=1-1/u*t,g=T(i,p,a,o),g.type="L",a&&(g.angle=c[0]);break;case"A":t=d-e;let{arcData:r}=n,{rx:x,ry:v,cx:M,cy:A,startAngle:P,endAngle:L,deltaAngle:k,xAxisRotation:C,tangentAdjust:I,sweep:E}=r.isEllipse?n.arcData_param:r,_=n.points[1],z=C*w;if(x!==v)for(let t=1;t<h.length&&!l;t++){let a=h[t];if(e<a){l=!0;let n=1/(a-h[t-1])*(a-e)||1,r=c[t-1],o=c[t],i=(r-o)*n+o;if(g=q(M,A,x,v,i,C,!1,!1),f=D(N(x,v,i)-C+I),g.angle=f,s){let t=Math.abs(i-P),e=Math.abs(L-i),a=t>=Math.PI?1:0,s=e>=Math.PI?1:0;g.commands=[{type:"A",values:[x,v,z,a,E,g.x,g.y]},{type:"A",values:[x,v,z,s,E,_.x,_.y]}]}}else e===a&&(g=_,f=D(N(x,v,L)-C+I),g.angle=f,l=!0)}else{p=1-1/u*t;let e=-k*p,l=Math.cos(e),r=Math.sin(e),h=n.points[0];if(g={x:l*(h.x-M)+r*(h.y-A)+M,y:l*(h.y-A)-r*(h.x-M)+A},a){let t=k>0?b:-b;g.angle=D(P+k*p+t)}if(s){let t=Math.abs(k*p),e=Math.abs(k-t),a=Math.abs(k-e),s=e>=Math.PI?1:0,n=a>=Math.PI?1:0;g.commands=[{type:"A",values:[x,v,z,s,E,g.x,g.y]},{type:"A",values:[x,v,z,n,E,_.x,_.y]}]}}break;case"C":case"Q":for(let t=0;t<h.length&&!l;t++){let s=h[t];if(a&&(g.angle=c[0]),0===t)g.x=y.p0.x,g.y=y.p0.y;else if(s===e)g.x=i[i.length-1].x,g.y=i[i.length-1].y;else if(s>e&&t>0){l=!0,p=m*t-m*(1/(s-(t>0?h[t-1]:h[t]))*(s-e)||0)||0,g=T(i,p,a,o)}}}g.t=p}s&&(g.index=n.index,g.segIndex=n.segIndex,g.com=n.com)}return g}function pt(t,e=9){let{segments:a}=t;if(t.hasOwnProperty("extremes")&&t.segments[0].hasOwnProperty("extremes"))return t.extremes;let s=[a[0].com.p0],n=1===a.length;for(let n=0,l=a.length;n<l;n++){let l=a[n],{type:r,points:h,com:o}=l,{p0:i,values:u}=o,c=h[h.length-1],y=[i];switch(r){case"M":continue;case"A":let{arcData:t}=l;z(i,c,t.isEllipse?l.arcData_param:t).forEach(t=>{s.push(t),y.push(t)});break;case"C":case"Q":let e=_(h);e.length&&(y.push(...e),s.push(...e))}y.push(c),s.push(c),t.segments[n].extremes=y,t.segments[n].bbox=Z(y,e)}let l=a[0].bbox;return n||(l=Z(s,e)),t.bbox=l,t.extremes=s,s}function xt(t){let{pathData:e,segments:a}=t;if(t.hasOwnProperty("area"))return t.area;let s=0,n=[],l=R(e),r=l.length>1,h=[];if(r){let t=V(l);t.forEach(function(e,a){for(let s=0;s<t.length;s++){let n=t[s];a!==s&&(B(e,n)&&h.push(s))}})}let o=[];return l.forEach((t,e)=>{n=[];let l=0,r=0,i=1,u=[];for(let e=0,s=t.length;e<s;e++){let s=t[e],{type:r,values:h}=s,o=s.hasOwnProperty("index")?s.index:e,i=a.find(t=>t.index===o)||null;if(!i)continue;let{segIndex:c}=i,y=h.length;if(h.length){let s=(e>0?t[e-1]:t[0]).values,o=s.length,p={x:s[o-2],y:s[o-1]},x={x:h[y-2],y:h[y-1]};if("C"===r||"Q"===r){let t={x:h[0],y:h[1]};u="C"===r?[p,t,{x:h[2],y:h[3]},x]:[p,t,x];let e=G(u);l+=e,i.area=e,n.push(p,x)}else if("A"===r){let{cx:t,cy:e,rx:s,ry:r,sweep:h,startAngle:o,endAngle:u,xAxisRotation:y}=i.arcData,g=U(s,r,o,u,y*A);g*=h?1:-1,g+=J([p,{x:t,y:e},x]),a[c].area=g,n.push(p,x),l+=g}else n.push(p,x)}}if(r=l+J(n),h.includes(e)){let t=o[o.length-1];i=t<0&&r>0||t>0&&r<0?1:-1}r*=i,s+=r,o.push(r)}),t.area=s,s}function gt(t,{keepCorners:e=!0,keepLines:a=!0,vertices:s=16,threshold:n=1,decimals:l=3}={}){xt(t);let{pathData:r,segments:h,totalLength:o}=t,i=o/s,u=r.filter(t=>"M"===t.type).map(t=>t.index),c=u.length,y=c>1,p=[[]],x=0,g=y?u[1]:1/0,f=[],d=[r],m=!1;c&&(d=R(r));let v=Array.from(new Set(r.map(t=>t.type))).join(""),M=!/[acsqt]/gi.test(v);if(d.forEach((t,a)=>{let s=function(t){let e=t.length;if("Z"==t[e-1].type)return!0;let a=t[0],[s,n]=[a.values[0],a.values[1]].map(t=>+t.toFixed(8)),l=t[e-1],r=l.values.length,[h,o]=[l.values[r-2],l.values[r-1]].map(t=>+t.toFixed(8));return!(s!==h||n!==o)}(t);if(s&&f.push(a),e&&M){let e=function(t,e=-1){let a=[],s={x:t[0].values[0],y:t[0].values[1]};return t.forEach(t=>{let{type:n,values:l}=t;if(l.length){let t=l.length>1?{x:l[l.length-2],y:l[l.length-1]}:"V"===n?{x:s.x,y:l[0]}:{x:l[0],y:s.y};e>-1&&(t=P(t)),a.push(t),s=t}}),a}(t,l);e.length&&(p[a]=e,s&&p[a].push(e[0]))}}),p=p.filter(Boolean),e&&M&&(m=!0,console.log("done - only polys",p)),!m&&!e){let e=p[x];for(let a=0;a<s;a++){let s=i*a,n=t.getPointAtLength(s,!1,!0,l),{x:r,y:h}=n,{index:o}=n;y&&x<c-1&&o>g&&(p.push([]),x++,g=u[x+1]),e=p[x],e.push({x:r,y:h})}let a=t.segments,n=a[a.length-1],r=n.points[n.points.length-1];e=p[x],e.push(r)}if(!m&&e){let e=p[0],s=0;for(let n=0,o=r.length;n<o;n++){let u=r[n],{type:y,values:g,index:f}=u;if("M"===y){n>0&&x<c-1&&(x++,p.push([]),e=p[x]);continue}let d=u.hasOwnProperty("index")?f:n,m=h.find(t=>t.index===d)||null;if(m){e=p[x];let{total:r,points:h}=m,u=h[0],c=h[h.length-1];e.push(u);let g=Math.ceil(r/i),f=r/g;if(!a||"L"!==y){let a=0;for(let n=1;n<g;n++){a=s+f*n;let r=t.getPointAtLength(a,!1,!0,l);r={x:r.x,y:r.y},e.push(r)}}s+=r,n===o-1&&e.push(c)}}console.log(p,x)}let b="",A="",w=1===p.length?p[0]:p;p.forEach((t,e)=>{l>-1&&(t=t.map(t=>({x:+t.x.toFixed(l),y:+t.y.toFixed(l)})));let a=`${t.map(t=>`${t.x} ${t.y}`).join(" ")} `;A+=a,b+=`M ${a}`,f.includes(e)&&(b+="Z ")});let L={poly:w,d:b,points:A};return console.log("outputData",L),L}at[77]=2,at[109]=2,at[65]=7,at[97]=7,at[67]=6,at[99]=6,at[76]=2,at[108]=2,at[81]=4,at[113]=4,at[83]=4,at[115]=4,at[84]=2,at[116]=2,at[72]=1,at[104]=1,at[86]=1,at[118]=1,at[90]=0,at[122]=0,function(){if("undefined"==typeof Path2D)try{const{Path2D:t}=require("canvas");global.Path2D=t,console.log("[Path2D_svg] Using Path2D from 'canvas'")}catch(t){console.warn("[Path2D_svg] No Path2D found. Using stub (no rendering)."),global.Path2D=class{constructor(){}moveTo(){}lineTo(){}bezierCurveTo(){}quadraticCurveTo(){}arc(){}arcTo(){}ellipse(){}rect(){}roundRect(){}closePath(){}addPath(){}}}}();class ft extends Path2D{constructor(t){if(super(t),this.pathData=[],t instanceof ft)this.pathData=[...t.pathData];else if("string"==typeof t)if("function"!=typeof parsePathDataNormalized)console.warn("parsePathDataNormalized is not defined");else{const e=parsePathDataNormalized(t);this.pathData.push(...e)}}_record(t,e){let a,s,n=2*Math.PI;switch(t){case"moveTo":a="M",s=e;break;case"lineTo":a="L",s=e;break;case"bezierCurveTo":a="C",s=e;break;case"quadraticCurveTo":a="Q",s=e;break;case"closePath":a="Z",s=[];break;case"rect":{const[t,a,s,n]=e;return void this.pathData.push({type:"M",values:[t,a]},{type:"L",values:[t+s,a]},{type:"L",values:[t+s,a+n]},{type:"L",values:[t,a+n]},{type:"Z",values:[]})}case"arc":case"ellipse":{let[a,s,l]=e,[r,h,o]=e.slice(-3),i="ellipse"===t,u=i?e[4]:0,c=i?e[3]:l,y=h-r;y=0===y||y>=n?n:y,o&&y>0&&(y-=n),!o&&y<0&&(y+=n);let p=Math.abs(y)>=2*Math.PI||0===y,x=q(a,s,l,c,r,u,!1),g=q(a,s,l,c,h,u,!1);this._currentPoint?this.pathData.push({type:"L",values:[x.x,x.y]}):this.pathData.push({type:"M",values:[x.x,x.y]});let f=u?180*u/Math.PI:0,d=y>Math.PI?1:0,m=o?0:1,v=g;if(p){v=q(a,s,l,c,D(r+Math.PI),u,!1)}let M=p?2:1;for(let t=0;t<M;t++)v=p&&0==t?v:g,this.pathData.push({type:"A",values:[l,c,f,d,m,v.x,v.y]});return void(this._currentPoint=[g.x,g.y])}case"arcTo":{let[t,a,s,n,l]=e,[r,h]=this._currentPoint||[t,a],o={x:r-t,y:h-a},i={x:s-t,y:n-a},u=Math.hypot(o.x,o.y),c=Math.hypot(i.x,i.y);if(0===u||0===c||0===l)return void this.pathData.push({type:"L",values:[t,a]});o.x/=u,o.y/=u,i.x/=c,i.y/=c;let y=o.x*i.x+o.y*i.y;y=Math.min(Math.max(y,-1),1);let p=Math.acos(y);if(0===p)return void this.pathData.push({type:"L",values:[t,a]});let x=l/Math.tan(p/2),g={x:t+o.x*x,y:a+o.y*x},f={x:t+i.x*x,y:a+i.y*x},d=o.x*i.y-o.y*i.x<0?1:0,m=0;return this.pathData.push({type:"L",values:[g.x,g.y]}),void this.pathData.push({type:"A",values:[l,l,0,m,d,f.x,f.y]})}case"roundRect":{let[t,a,s,n,l]=e;Array.isArray(l)||(l=[l,l,l,l]),2===l.length&&(l=[l[0],l[1],l[0],l[1]]),4===l.length&&(l=l.map(t=>"number"==typeof t?{rx:t,ry:t}:t));let[r,h,o,i]=l;return r.rx=Math.min(r.rx,s/2),r.ry=Math.min(r.ry,n/2),h.rx=Math.min(h.rx,s/2),h.ry=Math.min(h.ry,n/2),o.rx=Math.min(o.rx,s/2),o.ry=Math.min(o.ry,n/2),i.rx=Math.min(i.rx,s/2),i.ry=Math.min(i.ry,n/2),this.pathData.push({type:"M",values:[t+r.rx,a]}),this.pathData.push({type:"L",values:[t+s-h.rx,a]}),this.pathData.push({type:"A",values:[h.rx,h.ry,0,0,1,t+s,a+h.ry]}),this.pathData.push({type:"L",values:[t+s,a+n-o.ry]}),this.pathData.push({type:"A",values:[o.rx,o.ry,0,0,1,t+s-o.rx,a+n]}),this.pathData.push({type:"L",values:[t+i.rx,a+n]}),this.pathData.push({type:"A",values:[i.rx,i.ry,0,0,1,t,a+n-i.ry]}),this.pathData.push({type:"L",values:[t,a+r.ry]}),this.pathData.push({type:"A",values:[r.rx,r.ry,0,0,1,t+r.rx,a]}),this.pathData.push({type:"Z",values:[]}),void(this._currentPoint=[t+r.rx,a])}default:return}this.pathData.push({type:a,values:s}),this._currentPoint=s.slice(-2)}moveTo(...t){return this._record("moveTo",t),super.moveTo(...t)}lineTo(...t){return this._record("lineTo",t),super.lineTo(...t)}bezierCurveTo(...t){return this._record("bezierCurveTo",t),super.bezierCurveTo(...t)}quadraticCurveTo(...t){return this._record("quadraticCurveTo",t),super.quadraticCurveTo(...t)}arc(...t){return this._record("arc",t),super.arc(...t)}arcTo(...t){return this._record("arcTo",t),super.arcTo(...t)}ellipse(...t){return this._record("ellipse",t),super.ellipse(...t)}rect(...t){return this._record("rect",t),super.rect(...t)}roundRect(...t){return this._record("roundRect",t),super.roundRect(...t)}closePath(...t){return this._record("closePath",t),super.closePath(...t)}getPathData(t={}){return Object.keys(t).length&&(this.pathData=X(this.pathData,t)),this.pathData}addPath(t,e){let a=[];if(super.addPath(t,e),t instanceof ft)a=t.getPathData();else{if("string"!=typeof t)throw new Error("Unsupported path type for addPath");a=parsePathDataNormalized(t)}if(e){let{a:t=1,b:s=0,c:n=0,d:l=1,e:r=0,f:h=0}=e;a=X(a,{arcToCubic:!0});for(let e=0,o=a.length;e<o;e++){let{type:o,values:i}=a[e];if(i.length)for(let e=0,a=i.length;e<a;e+=2){let a={x:i[e],y:i[e+1]};i[e]=t*a.x+n*a.y+r,i[e+1]=s*a.x+l*a.y+h}}}this.pathData.push(...a)}getPathDataString(t={}){return Object.keys(t).length&&(this.pathData=X(this.pathData,t)),this.pathData.map(t=>`${t.type} ${t.values.join(" ")}`).join(" ")}getD(t={}){return Object.keys(t).length&&(this.pathData=X(this.pathData,t)),this.pathData.map(t=>`${t.type} ${t.values.join(" ")}`).join(" ")}getPathLengthLookup(t={}){return"function"!=typeof getPathLengthLookup?(console.warn("getPathLengthLookup is not defined"),this.pathData):getPathLengthLookup(this.pathData,{})}getPathLookup(t={}){return"function"!=typeof getPathLengthLookup?(console.warn("getPathLengthLookup is not defined"),this.pathData):(console.log("lookup conv",t),getPathLengthLookup(this.pathData,t))}}SVGGeometryElement.prototype.getPathLookup=function(t="medium",e=!1,a=!0){return it(this,t,e,a)},SVGGeometryElement.prototype.getPathLengthLookup=function(t="medium",e=!1,a=!0){return it(this,t,e,a)},ht.prototype.getPointAtLength=function(t=0,e=!1,a=!1,s=-1){return yt(this,t,e,a,s)},ht.prototype.getExtremes=function(){return pt(this)},ht.prototype.getBBox=function(){if(this.hasOwnProperty("bbox"))return this.bbox;return pt(this),this.bbox},ht.prototype.getArea=function(){return xt(this)},ht.prototype.getPolygon=function({keepCorners:t=!0,keepLines:e=!0,threshold:a=1,vertices:s=16,decimals:n=3}={}){return gt(this,{keepCorners:t,keepLines:e,threshold:a,vertices:s,decimals:n})},ht.prototype.getSegmentAtLength=function(t=0,e=!0,a=!0,s=-1){return function(t,e=0,a=!0,s=!0,n=-1){a&&pt(t),s&&xt(t);let l=t.segments,r=yt(t,e,!0,!0,n),{com:h,t:o,index:i,segIndex:u,angle:c,x:y,y:p}=r,x={type:"M",values:[h.p0.x,h.p0.y]};if("z"===h.type.toLowerCase()){let{points:t}=l[u],e=t[t.length-1];h={type:"L",values:[e.x,e.y]}}let g=[x,h],f={angle:c,com:h,index:i,pathData:g,d:nt(g),t:o,x:y,y:p};return a&&(f.bbox=l[u]?.bbox,l[u]||console.log("no bb",u)),s&&(f.area=l[u]?.area||0),f}(this,t,e,a,s)},ht.prototype.splitPathAtLength=function(t=0){return function(t,e=0){let a=yt(t,e,!0,!0),s=t.pathData,{x:n,y:l,index:r,commands:h=[]}=a;if(!e)return{pathDataArr:[s,[]],dArr:[nt(s),""],index:0};let[o,i]=h,u={x:s[0].values[0],y:s[0].values[1]},c=[],y=[];s.forEach((t,e)=>{let{type:a,values:s}=t;e<r?c.push(t):e===r?(c.push(o),y.push({type:"M",values:[n,l]},i)):e>r&&("z"===a.toLowerCase()?y.push({type:"L",values:[u.x,u.y]}):y.push(t))});let p=nt(c),x=nt(y);return{pathDataArr:[c,y],dArr:[p,x],index:r}}(this,t)},"undefined"!=typeof window&&(window.getPathLengthLookup=it,window.getPathLookup=ot,window.getPathLength=ut,window.parsePathDataString=st,window.normalizePathInput=rt,window.parsePathDataNormalized=tt,window.getPathDataFromEl=lt,window.normalizePathData=X,window.stringifyPathData=nt,window.getPolygonFromLookup=gt,window.Path2D_svg=ft);export{v as PI,ft as Path2D_svg,t as abs,e as acos,a as asin,s as atan,n as atan2,l as ceil,r as cos,h as exp,o as floor,lt as getPathDataFromEl,ut as getPathLength,it as getPathLengthLookup,ot as getPathLookup,gt as getPolygonFromLookup,u as hypot,i as log,c as max,y as min,X as normalizePathData,rt as normalizePathInput,tt as parsePathDataNormalized,st as parsePathDataString,p as pow,x as random,g as round,f as sin,d as sqrt,nt as stringifyPathData,m as tan};
